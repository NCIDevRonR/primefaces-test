<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"      
      xmlns:p="http://primefaces.org/ui">

   <h:head>
        <title>MyApp View PDF File</title>
        <h:outputScript name="test.js" />
        <h:outputStylesheet name="test.css" />
    </h:head>
    <h:body>
        <ui:define name="title">
            <h:outputText value="MyApp View PDF File"></h:outputText>
        </ui:define>

            <h:form>
                <p:panel header="House Listings">
                    <h:panelGrid id="selectListing" columns="1" cellpadding="5">
                        <!-- Selection of listings -->
                        <p:outputLabel for="@next" value="Select a Listing"/>
                        <p:selectOneMenu id="selectedListing" value="#{listingCtrlr.selectedListing}" required="true" label="Selected Listing">
                            <f:selectItem itemLabel="-select-" itemValue="" noSelectionOption="false" />
                            <f:selectItem itemLabel="Monticello" itemValue="listingMonticello" />
                            <f:selectItem itemLabel="Mount Vernon" itemValue="listingMtVernon" />
                            <f:selectItem itemLabel="Delta House" itemValue="listingDelta" />
                            <p:ajax update="@form" />
                        </p:selectOneMenu>
                        <p:message for="selectListing" />
                        <p:commandButton id="btnDisplay" process="selectListing" disabled="#{listingCtrlr.selectedListing==''}"  value="Display" actionListener="#{listingCtrlr.btnDisplay}" />
                        <p:spacer width="100" height="70" />
                   </h:panelGrid>
                </p:panel>
            </h:form>

            <p:dialog header="House Listing Viewer" widgetVar="listingViewer" modal="true" appendTo="@(body)" onShow="init()">
                <h:form id="reportViewerForm">
                    <h:panelGrid id="reportViewer" columns="1" cellpadding="5" columnClasses="ui-grid-col-5.5,ui-grid-col-1 middleButtons,ui-grid-col-5.5">
                        <p:column> 
                                <p:media id="docView" width="1000px" height="400pxc" player="pdf" zoom="page-width" value="#{listingCtrlr.streamedContent}" cache="true" />
                        </p:column>
                        <p:column> 
                                <p:commandButton id="btnCloseRptViewer" process="reportViewer" value="Close" onclick="PF('listingViewer').hide();" />
                        </p:column>
                    </h:panelGrid>
               </h:form>
            </p:dialog>

    <h:form>
        <p:remoteCommand name="refreshStreamOffer" actionListener="#{listingCtrlr.refreshStream()}" />
    </h:form>

    <script type="text/javascript">

        function startOffer() {
                refreshStreamOffer();
        }

        function stopOffer() {
                refreshStreamOffer();
        }
        
        
       
        
        
    </script>
    </h:body>	

</html>
        